{"_path":"/android/lesson10/notifications-groups","_dir":"lesson10","_draft":false,"_partial":false,"_locale":"","title":"Notifications. Групування сповіщень","description":"В Android 7 (API 24) з'явилася можливість групувати сповіщення. Навіть якщо ви це явно не реалізуєте, система сама створить групу, якщо у вас 4 і більше повідомлень.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"notifications-групування-сповіщень"},"children":[{"type":"text","value":"Notifications. Групування сповіщень"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В Android 7 (API 24) з'явилася можливість групувати сповіщення. Навіть якщо ви це явно не реалізуєте, система сама створить групу, якщо у вас "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"4"}]},{"type":"text","value":" і більше повідомлень."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Виглядає це так:\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/android/10-lesson/15-notifications-groups/1.gif"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ви можете розгорнути/згорнути/видалити групу. На окреме повідомлення ви також можете натиснути або видалити його. Якщо сповіщень у групі стає менше 4, то сповіщення стають окремими від групи."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Усі ваші сповіщення потраплятимуть в одну безіменну групу. За замовчуванням, натискання на цю групу відкриє застосунок."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Розглянемо, які можливості управління групами нам надано."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ми можемо:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"створювати кілька груп і самі вирішувати, в яку з них піде нове повідомлення. Група відображатиметься, коли в ній є хоча б два повідомлення."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"додати до групи текстовий опис"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"додати до групи "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PendingIntent"}]},{"type":"text","value":", який спрацює після натискання на групу"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Як приклад можна розглянути поштовий додаток. У користувача є кілька акаунтів і в них приходять нові листи. Буде розумно створювати окрему групу для кожного акаунта. Кожна така група відображатиме тільки ті листи, які знаходяться в певному акаунті."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Розглянемо на практиці. Створюємо повідомлення:"}]},{"type":"element","tag":"pre","props":{"className":"language-java shiki shiki-themes github-dark github-light monokai","code":"NotificationCompat.Builder mBuilder =\n       new NotificationCompat.Builder(this)\n               .setSmallIcon(R.mipmap.ic_launcher)\n               .setContentTitle(\"Sender \" + 1)\n               .setContentText(\"Subject text \" + 1)\n               .setGroup(GROUP_KEY);\n \nNotification notification = mBuilder.build();\n \nNotificationManager notificationManager =\n       (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\nnotificationManager.notify(1, notification);\n","language":"java","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"NotificationCompat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"Builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" mBuilder "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"=\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"       new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" NotificationCompat."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"Builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#FD971F"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setSmallIcon"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(R.mipmap.ic_launcher)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setContentTitle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"Sender \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" +"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setContentText"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"Subject text \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" +"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setGroup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(GROUP_KEY);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"Notification"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" notification "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" mBuilder."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"NotificationManager"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" notificationManager "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"=\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"       (NotificationManager) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"getSystemService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(NOTIFICATION_SERVICE);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"notificationManager."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"notify"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", notification);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Повідомлення створюється так само, як зазвичай. Додано тільки метод "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setGroup"}]},{"type":"text","value":". У ньому нам потрібно вказати "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" ключ групи, щоб система знала, в яку групу поміщати це повідомлення."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Створюємо групу:"}]},{"type":"element","tag":"pre","props":{"className":"language-java shiki shiki-themes github-dark github-light monokai","code":"NotificationCompat.Builder mBuilder =\n       new NotificationCompat.Builder(this)\n               .setSmallIcon(R.mipmap.ic_launcher)\n               .setContentInfo(\"user_mail.com\")\n               .setGroup(GROUP_KEY)\n               .setGroupSummary(true);\n \nNotification notification = mBuilder.build();\n \nNotificationManager notificationManager =\n       (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\nnotificationManager.notify(-100, notification);\n","language":"java","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"NotificationCompat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"Builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" mBuilder "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"=\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"       new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" NotificationCompat."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"Builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#FD971F"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setSmallIcon"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(R.mipmap.ic_launcher)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setContentInfo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"user_mail.com\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setGroup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(GROUP_KEY)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"               ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"setGroupSummary"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"Notification"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" notification "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" mBuilder."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"NotificationManager"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" notificationManager "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"=\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"       (NotificationManager) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"getSystemService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(NOTIFICATION_SERVICE);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"notificationManager."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"notify"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", notification);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Група створюється так само, як і повідомлення. Але тексти, які ми зазвичай передаємо в "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setContentTitle"}]},{"type":"text","value":" і "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setContentTitle"}]},{"type":"text","value":", у групі не відображаються, тому я в прикладі їх не використовую. Щоправда, у наступних версіях Android відображення груп може змінитися, і вони раптом почнуть відображати "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"title"}]},{"type":"text","value":" і "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"text"}]},{"type":"text","value":". Може і має сенс передавати туди що-небудь."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"А ось текст із методу "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setContentInfo"}]},{"type":"text","value":" буде відображено, і це дає нам змогу дати якийсь текстовий опис для групи, щоб користувач розумів, про що вона. Оскільки ми розглядаємо приклад поштового застосунку, то можна використовувати ім'я акаунта користувача. Користувач буде бачити, в якій групі, вміст якого акаунта відображається."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"У "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setGroup"}]},{"type":"text","value":" передаємо "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" ключ групи. Його ж ми використовуємо при створенні повідомлень, які повинні потрапляти в цю групу."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"У "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setGroupSummary"}]},{"type":"text","value":" вказуємо "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":". Це означає, що повідомлення є групою."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"У методі "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"notify"}]},{"type":"text","value":", так само, як і для звичайного повідомлення, необхідно вказувати "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":". Тут будьте уважні і стежте, щоб у повідомлення і у групи не збіглися "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":". Група все-таки є звичайним повідомленням. А в разі збігу "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":", одне повідомлення замінить інше."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Як варіант, для повідомлень про новий лист можна брати "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" листа, а для груп - від'ємне значення "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" акаунта. Тоді вони точно не перетнуться."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"У підсумку ви отримаєте таку картину\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/android/10-lesson/15-notifications-groups/2.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Три нові листи зібралися в одну групу. І в описі групи видно, що вона відображає листи акаунта "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"user@mail.com"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"коли-створювати-групу"},"children":[{"type":"text","value":"Коли створювати групу"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Групу має сенс відображати щоразу після створення повідомлення, яке входить до цієї групи. Якщо група вже існує і відображається, то просто нічого не станеться (якщо ви не змінювали параметри групи)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"А якщо ми відобразимо групу тільки один раз, і користувач у якийсь момент видалить її з повідомлень, то всі наші нові повідомлення залишаться без групи."}]},{"type":"element","tag":"h2","props":{"id":"сортування-в-групі"},"children":[{"type":"text","value":"Сортування в групі"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ви можете сортувати сповіщення в групі, використовуючи метод "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setSortKey"}]},{"type":"text","value":" у білдері кожного сповіщення. Передаєте в нього строкове значення, і за ним буде виконуватися сортування."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"коли-створювати-групу","depth":2,"text":"Коли створювати групу"},{"id":"сортування-в-групі","depth":2,"text":"Сортування в групі"}]}},"_type":"markdown","_id":"content:1.android:10.lesson10:15.notifications-groups.md","_source":"content","_file":"1.android/10.lesson10/15.notifications-groups.md","_stem":"1.android/10.lesson10/15.notifications-groups","_extension":"md"}